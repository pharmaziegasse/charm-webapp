(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,a){e.exports=a(476)},217:function(e,t,a){},467:function(e,t,a){},469:function(e,t,a){},470:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=(a(214),a(41)),s=a(13),i=a(66),m=a(54),u=(a(215),a(216),a(217),a(30)),d=a.n(u),h=a(38),p=a(24),g=a(25),f=a(27),b=a(26),E=a(28),v=a(29),y=a(16),N=a(1),k=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){localStorage.removeItem("wca"),window.location.href="/login"},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.globalState;return r.a.createElement(N.p,{color:"unique-darkblue",className:"mt-4"},r.a.createElement("div",{className:"py-4"},r.a.createElement(N.k,null,t.logged?r.a.createElement(r.a.Fragment,null,t.coach?r.a.createElement(N.v,{className:"text-center flex-center"},r.a.createElement(N.h,{md:"4"},r.a.createElement("a",{href:"https://kisy.aichner-christian.com/?goto=Charm&token=asdf",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(N.s,{icon:"medkit",className:"pr-2"}),"Technischer Support")),r.a.createElement(N.h,{md:"4"},r.a.createElement(N.c,{color:"white",rounded:!0,size:"md",onClick:function(){return e.logout()}},r.a.createElement(N.s,{icon:"sign-out-alt",className:"pr-2"}),"Logout"))):r.a.createElement(N.v,{className:"text-center flex-center"},r.a.createElement(N.h,{md:"4"},r.a.createElement("a",{href:"#!"},"Referral Programm")),r.a.createElement(N.h,{md:"4"},r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"facebook-f",className:"pr-2"})),r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"instagram",className:"pl-2"}))),r.a.createElement(N.h,{md:"4"},r.a.createElement("a",{href:"#!"},"Fragen? Wir sind f\xfcr Sie da!")))):r.a.createElement("p",null,"Noch nicht eingeloggt content"))),r.a.createElement("div",{className:"footer-copyright text-center py-3"},r.a.createElement(N.k,{fluid:!0},"\xa9 2018 - ",(new Date).getFullYear()," Copyright: Pharmaziegasse",r.a.createElement("sup",null,"\xae"))))}}]),t}(r.a.PureComponent),O=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).handleResize=function(){return a.setState({windowWidth:window.innerWidth})},a.handleToggleClickA=function(){a.setState({toggleStateA:!a.state.toggleStateA})},a.state={toggleStateA:!1,breakWidth:1300,windowWidth:0},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.x,{triggerOpening:this.state.toggleStateA,breakWidth:this.state.breakWidth,fixed:!0},r.a.createElement(N.b,{className:"mx-5 mt-5 mb-3"},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(20).jpg",alt:"",className:"rounded-circle img-fluid"})),r.a.createElement("h4",{className:"text-center"},"Erika Mustermann"),r.a.createElement("li",null,r.a.createElement("ul",{className:"social"},r.a.createElement("li",null,r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"facebook-f"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"pinterest"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"google-plus-g"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"#!"},r.a.createElement(N.s,{fab:!0,icon:"twitter"}))))),r.a.createElement(N.A,null,r.a.createElement(N.y,{name:"Submit blog",id:"submit-blog-cat",icon:"chevron-right"},r.a.createElement(N.z,null,"Submit listing"),r.a.createElement(N.z,null,"Registration form")),r.a.createElement(N.y,{iconRegular:!0,name:"Instruction",id:"instruction-cat",icon:"hand-pointer"},r.a.createElement(N.z,null,"For bloggers"),r.a.createElement(N.z,null,"For authors")),r.a.createElement(N.y,{name:"About",id:"about-cat",icon:"eye"},r.a.createElement(N.z,null,"Instruction"),r.a.createElement(N.z,null,"Monthly meetings")),r.a.createElement(N.y,{name:"Contact me",id:"contact-me-cat",icon:"envelope"},r.a.createElement(N.z,null,"FAQ"),r.a.createElement(N.z,null,"Write a message"))),r.a.createElement(N.z,{className:"nav-settings"},r.a.createElement(N.s,{icon:"cog",className:"pr-2"}),"Einstellungen")))}}]),t}(r.a.Component),S=a(55),j=a(202),x=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={dataRadar:{labels:["Gro\xdfe Poren","Sensible Haut","Hautalterung","\xd6lige Haut","Trockene Haut","Unreine Haut","Pigmentflecken","Zeichen\noxidativen Stresses"],datasets:[{label:"# of Votes",data:[10,7,10,10,4,10,2,5],backgroundColor:["rgba(150, 0, 150, 0.2)"],borderColor:["rgba(150, 0, 150, 1)"],borderWidth:1}]},dataRadarOptions:{responsive:!0,elements:{line:{tension:.4}},legend:{display:!1},scale:{ticks:{beginAtZero:!0,max:10,min:0}},scales:{yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}],xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{beginAtZero:!0,display:!1,stepSize:1,min:0,max:10}}]}},dataRadarPlugins:[{beforeInit:function(e){e.data.labels.forEach(function(e,t,a){/\n/.test(e)&&(a[t]=e.split(/\n/))})}}]},a.componentDidMount=function(){document.title="Dein individuelles Programm"},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.globalState;return void 0===e.coach?r.a.createElement("div",{className:"w-100 h-100 flex-center"},r.a.createElement(N.B,null)):e.logged?e.logged&&e.coach?r.a.createElement(S.a,{to:"/coach"}):r.a.createElement(n.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",{className:"support-card"},r.a.createElement(N.c,{tag:"a",size:"lg",floating:!0,gradient:"night-fade"},r.a.createElement(N.s,{far:!0,icon:"comments fa-2x"})),r.a.createElement(N.c,{rounded:!0,outline:!0,color:"secondary"},"Coach kontaktieren")),r.a.createElement(N.k,null,r.a.createElement(N.v,{className:"justify-content-center"},r.a.createElement(N.h,{md:"6"},r.a.createElement(N.d,{className:"chart-card"},r.a.createElement(N.e,null,r.a.createElement(N.g,{className:"mb-4"},"Ihr Hautzustand"),r.a.createElement(j.a,{data:this.state.dataRadar,options:this.state.dataRadarOptions,plugins:this.state.dataRadarPlugins}),r.a.createElement(N.f,{className:"mt-4"},"Some quick example text to build on the card title and make up the bulk of the card's content.")))),r.a.createElement(N.h,{md:"6"},r.a.createElement(N.d,{className:"timeline-card"},r.a.createElement(N.e,{className:"py-0"},r.a.createElement(N.v,null,r.a.createElement("div",{className:"mdb-feed"},r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"label"},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(18)-mini.jpg",alt:"",className:"rounded-circle z-depth-1-half"})),r.a.createElement("div",{className:"excerpt"},r.a.createElement("div",{className:"brief"},r.a.createElement("a",{href:"#!",className:"name"},"Monika")," hat Ihr neues Programm ",r.a.createElement("a",{href:"#!"},"versendet"),r.a.createElement("div",{className:"date"},"Vor 10 Stunden")),r.a.createElement("div",{className:"added-images"},r.a.createElement("img",{src:"https://pharmaziegasse.at/media/images/IMG_9948.original.jpg",alt:"",className:"z-depth-1 rounded mb-md-0 mb-2"})))),r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"label"},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(20)-mini.jpg",alt:"",className:"rounded-circle z-depth-1-half"})),r.a.createElement("div",{className:"excerpt"},r.a.createElement("div",{className:"brief"},"Sie haben sich die Verbesserungen angesehen",r.a.createElement("div",{href:"#!",className:"date"},"Vor 14 Stunden")))),r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"label"},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(18)-mini.jpg",alt:"",className:"rounded-circle z-depth-1-half"})),r.a.createElement("div",{className:"excerpt"},r.a.createElement("div",{className:"brief"},r.a.createElement("a",{href:"#!",className:"name"},"Monika")," hat Ihr Programm verbessert",r.a.createElement("div",{className:"date"},"Vor 2 Tagen")),r.a.createElement("div",{className:"added-text"},"Da Ihre unreine Haut am meisten Potential f\xfcr Verbesserungen bietet, habe ich Ihr individuelles Programm genau auf Ihre Bed\xfcrfnisse hin angepasst."))),r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"label"},r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(20)-mini.jpg",alt:"",className:"rounded-circle z-depth-1-half"})),r.a.createElement("div",{className:"excerpt"},r.a.createElement("div",{className:"brief"},"Sie haben Ihren ",r.a.createElement("a",{href:"#!"},"Hautzustand")," aktualisiert",r.a.createElement("div",{className:"date"},"Vor 3 Tagen")),r.a.createElement("div",{className:"added-images"},r.a.createElement("img",{src:"https://pixnio.com/free-images/2017/11/30/2017-11-30-18-11-20-1200x800.jpg",alt:"",className:"z-depth-1 rounded"})))),r.a.createElement("a",{href:"!#"},"Gesamte Timeline anzeigen")))))),r.a.createElement(N.h,{md:"10",className:"my-5"},r.a.createElement(N.d,{className:"coach-card"},r.a.createElement(N.e,null,r.a.createElement(N.v,null,r.a.createElement(N.h,{md:"auto pl-5"},r.a.createElement(N.b,null,r.a.createElement("img",{src:"https://mdbootstrap.com/img/Photos/Avatars/img%20(18).jpg",alt:"",className:"rounded-circle img-fluid"}))),r.a.createElement(N.h,{className:"align-self-center"},r.a.createElement("h4",null,"Monika Mustermann"),r.a.createElement("p",{className:"text-muted m-0"},"Ihr pers\xf6licher Beauty Coach")),r.a.createElement(N.h,{className:"align-self-center text-right pr-5"},r.a.createElement(N.c,{rounded:!0,outline:!0,color:"secondary"},"Coach kontaktieren"))))))))):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),w=a(12),C=a(98),_=a.n(C),P={display:["INLINE_STYLE_BUTTONS","BLOCK_TYPE_BUTTONS","LINK_BUTTONS","BLOCK_TYPE_DROPDOWN","HISTORY_BUTTONS"],INLINE_STYLE_BUTTONS:[{label:"Bold",style:"BOLD",className:"custom-css-class"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"}],BLOCK_TYPE_DROPDOWN:[{label:"Normal",style:"unstyled"},{label:"Heading Large",style:"header-one"},{label:"Heading Medium",style:"header-two"},{label:"Heading Small",style:"header-three"}],BLOCK_TYPE_BUTTONS:[{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"}]},T=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).componentWillMount=function(){Object.keys(a.props.location.state.articles).map(function(e,t){return a.setState(Object(w.a)({},"collapse"+t,!0)),""!==a.props.location.state.articles[e].text&&void 0!==a.props.location.state.articles[e].text?(a.setState(Object(w.a)({},"value"+t,_.a.createValueFromString(a.props.location.state.articles[e].text,"html"))),!0):(a.setState(Object(w.a)({},"value"+t,_.a.createEmptyValue())),!1)}),document.title="Beautyreport Revision"},a.toggleCollapse=function(e){return function(){return a.setState(Object(w.a)({},e,!a.state[e]))}},a.getStatus=function(){var e=0;Object.keys(a.state).map(function(t,n){return!1===a.state[t]&&e++,!0});var t=Object.keys(a.props.location.state.articles).length;return e/t*100},a.isFinished=function(){return 100!==a.getStatus()},a.onChange=function(e,t){a.setState(Object(w.a)({},"value"+e,t))},a.goBack=function(){a.props.history.push("../report")},a.state={test:""},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.globalState;if(!t.logged)return r.a.createElement(S.a,{to:"/login"});if(t.logged&&!t.coach)return r.a.createElement(S.a,{to:"/dashboard"});console.log(this.state);var a=this.props.location;return void 0!==a?void 0!==a.state?r.a.createElement(N.k,{className:"pt-5"},r.a.createElement("h2",{className:"text-center font-weight-bold"},"Beautyreport \xfcberpr\xfcfen"),r.a.createElement("div",{className:"mt-4 mb-3 text-left"},r.a.createElement(y.b,{to:"/report"},r.a.createElement(N.c,{color:"red"},r.a.createElement(N.s,{icon:"angle-left",className:"pr-2"}),"Zur\xfcck"))),r.a.createElement(N.u,{material:!0,color:100===this.getStatus()?"success":"secondary",value:this.getStatus(),height:"20px"},this.getStatus()>0&&r.a.createElement(r.a.Fragment,null,Math.round(this.getStatus()),"% abgeschlossen")),Object.keys(a.state.articles).map(function(t,n){var l=a.state.articles[t];return r.a.createElement(N.d,{key:n,className:"mt-3"},r.a.createElement(N.j,null,r.a.createElement(N.v,{className:"justify-content-center"},r.a.createElement(N.h,{md:"6",className:"align-self-center section-title"},l.heading),r.a.createElement(N.h,{md:"6",className:"text-right"},r.a.createElement(N.t,{label:"\xdcberpr\xfcft",filled:!0,type:"checkbox",id:"checkbox"+n,onClick:e.toggleCollapse("collapse"+n)})))),r.a.createElement(N.i,{id:"collapse1",isOpen:e.state["collapse"+n]},r.a.createElement(N.e,null,r.a.createElement(_.a,{value:e.state["value"+n],className:"textfield",onChange:function(t){return e.onChange(n,t)},readOnly:!e.state["collapse"+n],toolbarConfig:P}))))}),r.a.createElement(N.v,{className:"my-4"},r.a.createElement(N.h,{md:"6",className:"text-left"},r.a.createElement(N.c,{color:"danger",onClick:this.goBack},r.a.createElement(N.s,{icon:"times",className:"pr-2"}),"Verwerfen")),r.a.createElement(N.h,{md:"6",className:"text-right"},r.a.createElement(N.c,{color:"success",disabled:this.isFinished()},r.a.createElement(N.s,{icon:"save",className:"pr-2"}),"Speichern"),r.a.createElement(N.c,{color:"green",disabled:this.isFinished()},r.a.createElement(N.s,{far:!0,icon:"file-pdf",className:"pr-2"}),"Speichern + PDF")))):null:r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),D=a(481),F=a(39),B=a.n(F);a(467);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function L(){var e=Object(v.a)(["\n    query getBeautyReports_byUid($token: String!, $id: Int!) {\n        brByUid(token: $token, uid: $id) {\n            __typename\n            id\n            date\n            document{\n                __typename\n                id\n                link\n            }\n        }\n        brLatestByUid(token: $token, uid: $id) {\n            __typename\n            id\n            date\n            document{\n                __typename\n                id\n                link\n            }\n        }\n    }\n"]);return L=function(){return e},e}var z=B()(L()),$=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){document.title="Beautyreport List",a.props.location&&a.props.location.state&&a.props.location.state.user.id&&a.setState({user:a.props.location.state.user,loading:!0},function(){return a.fetchReports(a.props.location.state.user.id)})},a.componentWillUnmount=function(){},a.fetchReports=function(e){a.fetchAllReports(e)},a.fetchAllReports=function(e){a.props.client.query({query:z,variables:{id:e,token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;t.brLatestByUid&&(console.log("Data"),console.log(t),a.setState({reports:I({},a.state.reports,{latest:t.brLatestByUid}),loading:!1})),t.brByUid?(console.log("Beautyreports exist for this user"),a.setState({reports:I({},a.state.reports,{legacy:t.brByUid}),loading:!1})):console.log("There are no Beautyreports for this user")}).catch(function(e){a.setState({reports:{legacy:[],latest:void 0},loading:!1},function(){return console.error("Error",e)})})},a.getDate=function(e){var t=new Date(e),a=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2);return("0"+t.getDate()).slice(-2)+"."+n+"."+a+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)},a._getTable=function(){return{columns:[{label:"#",field:"id",sort:"desc"},{label:"Date",field:"date",sort:"asc"},{label:"Visible",field:"visible",sort:"disabled"},{label:"PDF Upload",field:"pdf",sort:"disabled"},{label:"Download",field:"download",sort:"disabled"},{label:"Quick actions",field:"actions",sort:"disabled"}],rows:a._getBeautyReports()}},a._getBeautyReports=function(){return a.state.reports.legacy.map(function(e,t){return{id:t+1,date:a.getDate(e.date),visible:r.a.createElement(N.t,{label:"F\xfcr Kunden sichtbar",filled:!0,type:"checkbox",disabled:!0,id:"show_latest_"+t}),pdf:r.a.createElement(N.o,{btnTitle:"File ausw\xe4hlen",btnColor:"purple",textFieldTitle:"Lade das PDF hoch"}),download:r.a.createElement(r.a.Fragment,null,null!==e.document?r.a.createElement("a",{href:"https://manage.pharmaziegasse.at/"+e.document.link},r.a.createElement(N.c,{size:"md",color:"primary"},r.a.createElement(N.s,{icon:"file-word",className:"pr-2"}),"Download")):r.a.createElement("p",null,"No download")),actions:r.a.createElement(N.c,{size:"md",color:"danger",disabled:!0},r.a.createElement(N.s,{icon:"trashcan",className:"pr-2"}),"Remove")}})},a.state={userId:void 0,reports:{latest:void 0,legacy:[]},showLegacy:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.globalState,n=t.location;return a.logged?a.logged&&!a.coach?r.a.createElement(S.a,{to:"/dashboard"}):n.state?(console.log(this.state),r.a.createElement(N.k,{className:"text-center pt-5",id:"reportlist"},r.a.createElement("h2",{className:"text-center font-weight-bold"},"Beautyreports von ",n.state.user.firstName+" "+n.state.user.lastName),r.a.createElement("div",{className:"mt-4"},r.a.createElement(N.v,null,r.a.createElement(N.h,{md:"6",className:"text-left"},r.a.createElement(y.b,{to:"/coach"},r.a.createElement(N.c,{color:"red"},r.a.createElement(N.s,{icon:"angle-left",className:"pr-2"}),"Zur\xfcck"))),r.a.createElement(N.h,{md:"6",className:"text-right"},r.a.createElement(y.b,{to:{pathname:"/report/add",state:{user:this.props.location.state.user}}},r.a.createElement(N.c,{color:"secondary",rounded:!0},r.a.createElement(N.s,{icon:"plus",className:"pr-2"}),"Neuen Report generieren"))))),this.state.loading?r.a.createElement("div",{className:"text-center w-100 h-100"},r.a.createElement(N.B,null)):r.a.createElement("div",{className:"mt-4"},r.a.createElement(N.v,{className:"flex-center mb-4"},r.a.createElement(N.h,{md:"6"},r.a.createElement(N.d,null,this.state.reports.latest?r.a.createElement(N.e,{className:"active-report"},r.a.createElement("p",{className:"lead font-weight-bold"},"Neuester Beautyreport"),r.a.createElement("small",null,this.getDate(this.state.reports.latest.date)),r.a.createElement("p",{className:"lead mt-3 mb-2"},"Download"),this.state.reports.latest.document&&r.a.createElement("a",{href:"https://manage.pharmaziegasse.at/"+this.state.reports.latest.document.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(N.c,{color:"primary",className:"d-block m-auto"},r.a.createElement(N.s,{icon:"file-word",className:"pr-2"}),"MS Word")),r.a.createElement("hr",null),r.a.createElement("p",{className:"lead my-3"},"Neuste Version hochladen"),r.a.createElement(N.o,{btnTitle:"File ausw\xe4hlen",btnColor:"purple",textFieldTitle:"Lade das neueste PDF hoch"}),r.a.createElement("p",{className:"lead mt-3"},"Aktuelle Version"),r.a.createElement("small",null,"Hochgeladen: 19.09.2019 12:42:22"),r.a.createElement(N.c,{color:"red",disabled:!0,className:"d-block mt-3 ml-auto mr-auto"},r.a.createElement(N.s,{icon:"file-pdf",className:"pr-2"}),"PDF anzeigen"),r.a.createElement(N.t,{disabled:!0,label:"F\xfcr Kunden sichtbar",filled:!0,type:"checkbox",id:"show_latest"})):null))),this.state.reports.legacy.length>=1?r.a.createElement(r.a.Fragment,null,this.state.showLegacy?r.a.createElement(N.l,{striped:!0,bordered:!0,small:!0,exportToCSV:!0,data:this._getTable(),paginationLabel:[r.a.createElement(N.s,{icon:"angle-left",size:"lg",className:"pl-3 pr-3"}),r.a.createElement(N.s,{icon:"angle-right",size:"lg",className:"pl-3 pr-3"})]}):r.a.createElement("span",{onClick:function(){e.setState({showLegacy:!0})},className:"blue-text clickable"},"\xc4ltere Versionen anzeigen")):r.a.createElement("h3",null,"Noch kein Beauty-Report vorhanden")))):r.a.createElement(S.a,{to:"/coach"}):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),U=Object(D.b)($),q=a(207);a(469);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function R(){var e=Object(v.a)(["\n    query getAnamneseData_byUid($token: String!, $id: Int!) {\n        anLatestByUid(token: $token, uid: $id) {\n            id\n            date\n            formData\n            user {\n                id\n                username\n            }\n        }\n    }\n"]);return R=function(){return e},e}function G(){var e=Object(v.a)(["\n    mutation createAn ($token: String!, $values: GenericScalar!, $urlpath: String!) {\n        anamneseAnFormPage(\n            token: $token,\n            url: $urlpath,\n            values: $values\n        ) {\n            result\n            errors {\n                name\n                errors\n            }\n        }\n    }\n"]);return G=function(){return e},e}function W(){var e=Object(v.a)(["\n    query getAnamneseFields($token: String!) {\n        pages (token: $token) {\n            ... on AnamneseAnFormPage {\n                urlPath\n                formFields {\n                    name\n                    fieldType\n                    helpText\n                    required\n                    choices\n                    defaultValue\n                    label\n                }\n            }\n        }\n    }\n"]);return W=function(){return e},e}var H=B()(W()),K=B()(G()),Y=B()(R()),Q=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){document.title="Anamnese";var e=a.props.location.state.user;a.state.user||a.setState({user:e},function(){return a.initialize()})},a.initialize=Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.getAnamneseFields(),a.getAnmaneseData();case 2:case"end":return e.stop()}},e)})),a.resetButton=function(){a.state.success&&a.setState({success:!1})},a.getAnamneseFields=function(){a.props.client.query({query:H,variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;a.setState({data:t})}).catch(function(e){a.setState({data:!1},function(){return console.error(e)})})},a.getAnmaneseData=function(){console.log(a.state.user),a.props.client.query({query:Y,variables:{token:localStorage.getItem("wca"),id:a.state.user.id}}).then(function(e){var t=e.data;if(console.log(t),t.anLatestByUid){var n=JSON.parse(t.anLatestByUid.formData),r={};Object.keys(n).map(function(e,t){return r=V({},r,Object(w.a)({},e,null!==n[e]?n[e]:void 0)),t}),a.setState(V({},a.state,{},r))}}).catch(function(e){a.setState({formdata:!1},function(){return console.log(e.message)})})},a.sendData=Object(h.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=V({},a.state))||void 0===t||void 0===a.state.urlPath){e.next=4;break}return e.next=4,a.props.update({variables:{token:localStorage.getItem("wca"),values:t,urlpath:a.state.urlPath}}).then(function(e){var t=e.data;if(console.log(t),t&&t.anamneseAnFormPage){var n=t.anamneseAnFormPage;"OK"===n.result?(console.log("Sent"),a.setState({success:!0,errors:[]}),[].forEach.call(document.querySelectorAll(".alert-error"),function(e){e.parentNode.removeChild(e)})):"FAIL"===n.result&&(console.log("Error"),a.setState({success:!1},function(){return a.handleError(n.errors)}))}}).catch(function(e){console.error("Mutation error:",e)});case 4:case"end":return e.stop()}},e)})),a.handleError=function(e){a.state.refNames.map(function(e,t){var n=a["".concat(e,"_ref")].current,r=n.querySelector(".alert");return null!==r&&n.removeChild(r),!0}),void 0!==e&&e.length>=1&&(a["".concat(e[0].name,"_ref")].current.scrollIntoView(),e.map(function(e,t){if("FormError"===e.__typename){var n=a["".concat(e.name,"_ref")].current,r=document.createElement("div");r.className="alert alert-danger alert-error mt-2",r.innerHTML='<i class="fa fa-angle-up pr-2"></i>'.concat(e.errors[0]),n.appendChild(r)}return!0}))},a._handleChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value),function(){return a.resetButton()})},a._handleCheckBoxChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked),function(){return a.resetButton()})},a._handleCheckBoxesChange=function(e,t,n){var r=a.state[t];if(void 0!==r)if(r.includes(n)){var l=r.filter(function(e){return e!=n});a.setState(Object(w.a)({},t,l),function(){return a.resetButton()})}else r.push(n),a.setState(Object(w.a)({},t,r),function(){return a.resetButton()});else{var c=[n];a.setState(Object(w.a)({},t,c),function(){return a.resetButton()})}},a._handleSelectChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value),function(){return a.resetButton()})},a._setDefaultValue=function(e,t){if(""!==e.defaultValue&&void 0!==e.defaultValue&&(void 0===a.state[e.fieldType]||""===a.state[e.fieldType]||null===a.state[e.fieldType]))switch(e.fieldType){case"multiselect":var n=[];n=e.defaultValue.includes(", ")?e.defaultValue.split(", "):[e.defaultValue],a.state[e.name]||a.setState(Object(w.a)({},e.name,n));break;case"checkboxes":var r=[];r=e.defaultValue.includes(", ")?e.defaultValue.split(", "):[e.defaultValue],null!==a.state[e.name]&&void 0!==a.state[e.name]||a.setState(Object(w.a)({},e.name,r));break;case"checkbox":a.state[e.name]||(e.defaultValue?a.setState(Object(w.a)({},e.name,!0)):a.setState(Object(w.a)({},e.name,!1)));break;default:a.state[e.name]||a.setState(Object(w.a)({},e.name,e.defaultValue))}},a.getSelectValues=function(e){for(var t,a=[],n=e&&e.options,r=0,l=n.length;r<l;r++)(t=n[r]).selected&&a.push(t.value||t.text);return a},a._handleMultiSelectChange=function(e){a.setState(Object(w.a)({},e.target.name,a.getSelectValues(e.target)),function(){return a.resetButton()})},a._handleNumberClick=function(e,t){a.state[e]?a.setState(Object(w.a)({},e,parseInt(a.state[e],10)+parseInt(t,10)),function(){return a.resetButton()}):a.setState(Object(w.a)({},e,0+parseInt(t,10)),function(){return a.resetButton()})},a.printCheckboxes=function(e,t){return e.choices.split(",").map(function(n,l){var c=n.trim().toLowerCase().replace(/ /g,""),o=n.trim();return r.a.createElement(N.t,{key:l,checked:!(!a.state[e.name]||!a.state[e.name].includes(o)),name:c,onChange:function(t){return a._handleCheckBoxesChange(t,e.name,o)},label:o,filled:!0,type:"checkbox",id:"fromGroupInput"+t+l})})},a.printRadio=function(e,t,n,l){return e.split(",").map(function(e,c){var o=e.trim().toLowerCase().replace(/ /g,""),s=e.trim();return r.a.createElement(N.t,{onClick:function(){return a.setState(Object(w.a)({},t,s))},checked:!(!a.state[t]||a.state[t]!==s),label:s,key:c,name:o,type:"radio",id:"radio"+l+c,required:n})})},a.printOptions=function(e,t){return e.split(",").map(function(e,t){var a=e.trim();return r.a.createElement("option",{key:t,value:a},a)})},a.renderFields=function(){var e=a.state.data;if(void 0===e)return console.log("Loading"),r.a.createElement("div",{className:"text-center"},r.a.createElement(N.B,null));if(!1===e)return r.a.createElement("div",null,"Error!");if(void 0!==e){if(void 0!==e.pages){var t=void 0;return e.pages.map(function(e,a){return"AnamneseAnFormPage"===e.__typename&&(t=a),!0}),void 0!==t?(void 0===a.state.urlPath&&a.setState({urlPath:e.pages[t].urlPath}),e.pages[t].formFields.map(function(e,t){switch(a["".concat(e.name,"_ref")]=r.a.createRef(),a.state.refNames.includes(e.name)||a.setState(function(t){return{refNames:[].concat(Object(q.a)(t.refNames),[e.name])}}),a._setDefaultValue(e,t),e.fieldType.toLowerCase()){case"singleline":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"form-group my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("input",{type:"text",value:a.state[e.name],onChange:a._handleChange,name:e.name,className:"form-control",id:"fromGroupInput"+t,required:e.required}));case"hidden":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"form-group my-3 d-none"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("input",{type:"text",value:a.state[e.name],name:e.name,className:"form-control",id:"fromGroupInput"+t,disabled:!0}));case"number":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("div",{className:"\r def-number-input\r number-input\r mb-3"},r.a.createElement("button",{onClick:function(){return a._handleNumberClick(e.name,-1)},className:"minus"}),r.a.createElement("input",{name:e.name,id:"fromGroupInput"+t,value:a.state[e.name],onChange:a._handleChange,type:"number"}),r.a.createElement("button",{onClick:function(){return a._handleNumberClick(e.name,1)},className:"plus"})));case"checkbox":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement(N.t,{checked:a.state[e.name],name:e.name,onChange:a._handleCheckBoxChange,label:e.label&&e.label,filled:!0,type:"checkbox",id:"fromGroupInput"+t}));case"checkboxes":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement(N.q,null,a.printCheckboxes(e,t)));case"dropdown":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("div",null,r.a.createElement("select",{name:e.name,selected:a.state[e.name],onChange:a._handleSelectChange,className:"browser-default custom-select"},r.a.createElement("option",null,"Choose your option"),a.printOptions(e.choices,t))));case"multiselect":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,name:e.name,selected:a.state[e.name],onChange:a._handleMultiSelectChange,className:"browser-default custom-select"},r.a.createElement("option",null,"Choose your option"),a.printOptions(e.choices,t))));case"radio":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"my-3"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement(N.q,null,a.printRadio(e.choices,e.name,e.required,t)));case"multiline":return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"form-group"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("textarea",{className:"form-control",value:a.state[e.name],onChange:a._handleChange,name:e.name,id:"fromGroupInput"+t,rows:"5",required:e.required}));default:return r.a.createElement("div",{ref:a["".concat(e.name,"_ref")],key:t,className:"form-group"},r.a.createElement("label",{className:"heading",htmlFor:"fromGroupInput"+t},e.helpText&&e.helpText),r.a.createElement("input",{type:"text",value:a.state[e.name],onChange:a._handleChange,name:e.name,className:"form-control",id:"fromGroupInput"+t,required:e.required}))}})):null}return null}return null},a.state={urlPath:void 0,errors:[],refNames:[],data:void 0,user:void 0,success:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.globalState,a=e.location;return t.logged?t.logged&&!t.coach?r.a.createElement(S.a,{to:"/dashboard"}):void 0===a.state?r.a.createElement(S.a,{to:"/coach"}):void 0===a.state.user?r.a.createElement(S.a,{to:"/coach"}):this.state.user?r.a.createElement(N.k,{id:"anamnesis",className:"text-left pt-5"},r.a.createElement("h2",{className:"mb-5 text-center"},"Anamnese f\xfcr"," ",this.state.user.firstName+" "+this.state.user.lastName),r.a.createElement("div",{className:"text-left mt-4"},r.a.createElement(y.b,{to:"/coach"},r.a.createElement(N.c,{color:"red"},r.a.createElement(N.s,{icon:"angle-left",className:"pr-2"}),"Zur\xfcck"))),r.a.createElement(N.v,{className:"mb-4"},r.a.createElement(N.h,{md:"8"},this.renderFields())),this.state.success?r.a.createElement(N.c,{color:"success",disabled:!0},r.a.createElement(N.s,{icon:"check",className:"pr-2"}),"Gespeichert"):r.a.createElement(N.c,{color:"secondary",onClick:this.sendData},r.a.createElement(N.s,{icon:"save",className:"pr-2"}),"Speichern")):r.a.createElement("div",{className:"text-center"},r.a.createElement(N.B,null)):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),Z=Object(D.a)(K,{name:"update"})(Object(D.b)(Q)),J=(a(470),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(l)))).componentDidMount=function(){document.title="Your customers"},a._getCoachUsers=function(){if(a.props.globalState&&a.props.globalState.userdata){var e=a.props.globalState.userdata.userSet;if(e.length>=1)return e.map(function(e,t){return{id:t+1,userid:e.customerId,first:e.firstName,last:e.lastName,email:r.a.createElement("a",{href:"mailto:"+e.email,className:"blue-text"},e.email),phone:e.telephone,actions:r.a.createElement("div",{className:"user-action"},e.beautyreportSet.length>=1?r.a.createElement(y.b,{to:{pathname:"/report",state:{user:e}}},r.a.createElement(N.C,{placement:"top"},r.a.createElement(N.c,{rounded:!0,outline:!0,color:"green"},r.a.createElement(N.s,{icon:"signature",size:"lg"})),r.a.createElement("div",null,"Beautyreports einsehen"))):r.a.createElement(y.b,{to:{pathname:"/report/add",state:{user:e}}},r.a.createElement(N.C,{placement:"top"},r.a.createElement(N.c,{rounded:!0,outline:!0,color:"danger"},r.a.createElement(N.s,{icon:"signature",size:"lg"})),r.a.createElement("div",null,"Beautyreport erstellen"))),r.a.createElement(y.b,{to:{pathname:"/anamnesis",state:{user:e}}},e.anamneseSet.length>=1?r.a.createElement(N.C,{placement:"top"},r.a.createElement(N.c,{outline:!0,rounded:!0,color:"purple"},r.a.createElement(N.s,{icon:"file",size:"lg"})),r.a.createElement("div",null,"Anamnese erneuern")):r.a.createElement(N.C,{placement:"top"},r.a.createElement(N.c,{outline:!0,rounded:!0,color:"danger"},r.a.createElement(N.s,{far:!0,icon:"file",size:"lg"})),r.a.createElement("div",null,"Anamnese hinzuf\xfcgen"))),r.a.createElement(N.C,{placement:"top"},r.a.createElement(N.c,{href:"https://api.whatsapp.com/send?phone="+e.telephone.replace("+",""),target:"_blank",className:"btn-whatsapp-chat",outline:!0,rounded:!0,color:"success"},r.a.createElement(N.s,{fab:!0,icon:"whatsapp",size:"lg"})),r.a.createElement("div",null,"Mit ",e.firstName," chatten")))}});console.log("No users for this coach")}},a._getTable=function(){return{columns:[{label:"#",field:"id",sort:"asc"},{label:"Customer ID",field:"userid",sort:"asc"},{label:"First",field:"first",sort:"asc"},{label:"Last",field:"last",sort:"asc"},{label:"E-Mail",field:"email",sort:"disabled"},{label:"Phone",field:"phone",sort:"disabled"},{label:"Quick actions",field:"actions",sort:"disabled"}],rows:a._getCoachUsers()}},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.globalState;return e.logged?e.logged&&!e.coach?r.a.createElement(S.a,{to:"/dashboard"}):r.a.createElement(N.k,{id:"coach",className:"pt-5"},r.a.createElement("h2",{className:"text-center font-weight-bold"},"Willkommen zur\xfcck, ",r.a.createElement("span",null,e.userdata.firstName),"!"),r.a.createElement("div",{className:"mt-4 mb-3 text-right"},r.a.createElement(y.b,{to:"/add"},r.a.createElement(N.c,{color:"green"},r.a.createElement(N.s,{icon:"plus-circle",className:"pr-2"}),"Add customer"))),r.a.createElement(N.v,{className:"text-center"},r.a.createElement(N.h,{md:"12"},r.a.createElement("h3",null,"Deine KundInnen"),r.a.createElement("div",{className:"table-labels"},r.a.createElement("span",null,r.a.createElement(N.s,{icon:"cube",className:"pr-1 pl-3 red-text"}),"Keine Daten vorhanden"),r.a.createElement("span",null,r.a.createElement(N.s,{icon:"cube",className:"pr-1 pl-3 purple-text"}),"Keine Aktion erforderlich"),r.a.createElement("span",null,r.a.createElement(N.s,{icon:"cube",className:"pr-1 pl-3 green-text"}),"Daten optimal")),r.a.createElement(N.l,{striped:!0,bordered:!0,small:!0,exportToCSV:!0,data:this._getTable(),paginationLabel:[r.a.createElement(N.s,{icon:"angle-left",size:"lg",className:"pl-3 pr-3"}),r.a.createElement(N.s,{icon:"angle-right",size:"lg",className:"pl-3 pr-3"})]})),r.a.createElement(N.h,{md:"6"}),r.a.createElement(N.h,{md:"6"}))):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component)),X=a(97),ee=a.n(X),te=(a(189),a(206)),ae=a.n(te),ne=a(45),re=a(67);a(474);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oe(){var e=Object(v.a)(["\n    query ($token: String!) {\n        coachAll(token: $token) {\n            id\n            firstName\n            lastName\n        }\n        pages (token: $token) {\n            ... on UserUserFormPage {\n                urlPath\n            }\n        }\n    }\n"]);return oe=function(){return e},e}function se(){var e=Object(v.a)(["\n    mutation createUser ($token: String!, $urlPath: String!, $values: GenericScalar!) {\n        userUserFormPage(\n            token: $token,\n            url: $urlPath,\n            values: $values\n        ) {\n            result\n            errors {\n            name\n            errors\n            }\n        }\n    }\n"]);return se=function(){return e},e}var ie=ae()().getData(),me=Object(ne.a)(se()),ue=Object(ne.a)(oe()),de=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).handleTextChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.handlePhoneChange=function(e,t){e=e.replace(/\s/g,""),a.state.usePhoneAsCountry?a.setState({phone:e.trim(),country:{name:t.name,countryCode:t.countryCode.toUpperCase()},phoneCountry:{name:t.name,countryCode:t.countryCode.toUpperCase()}}):a.setState({phone:e.trim(),phoneCountry:{name:t.name,countryCode:t.countryCode.toUpperCase()}})},a.handlePhoneByCountry=function(e){e.target.checked?a.setState({usePhoneAsCountry:e.target.checked,country:a.state.phoneCountry}):a.setState({usePhoneAsCountry:e.target.checked,country:[]})},a.getPickerValue=function(e){var t=new Date(e),n=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);a.setState({birthdate:n})},a.handleSelectChange=function(e){a.setState({coach:e})},a.handleCountrySelectChange=function(e){a.setState({country:{name:"",countryCode:e[0]}})},a._fetchAllCountries=function(){var e=ie.map(function(e,t){return{text:e.label,value:e.value}});a.setState({Countries:e})},a._fetchAllCoaches=Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.client.query({query:ue,variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;if(t.coachAll){var n=t.coachAll.map(function(e,t){return{text:e.firstName+" "+e.lastName,value:e.id}}),r=t.pages.map(function(e,t){return void 0!==e.urlPath&&("UserUserFormPage"===e.__typename&&e.urlPath)});a.setState({Coaches:n,urlPath:r.filter(function(e){return e})})}}).catch(function(e){console.log("Error",e)});case 1:case"end":return e.stop()}},e)})),a._createUser=function(){if(""!==a.state.phone.trim()&&a.state.coach.length>=1){var e={title:a.state.title,coach_id:a.state.coach[0],first_name:a.state.firstName,last_name:a.state.lastName,email:a.state.email,birthdate:a.state.birthdate,telephone:a.state.phone,address:a.state.address,city:a.state.city,postal_code:a.state.zip,country:a.state.country.countryCode,customer_id:a.state.customerid},t=a.state.urlPath[0];t&&a.state.coach[0]&&a.state.firstName&&a.state.lastName&&(a.setState({loading:!0,errors:{}}),a.props.update({variables:{token:localStorage.getItem("wca"),urlPath:t,values:e}}).then(function(e){var t=e.data;a.setState({loading:!1}),"OK"===t.userUserFormPage.result?a.setState({errors:{},success:!0}):"FAIL"===t.userUserFormPage.result&&console.log("Errors",t.userUserFormPage.errors)}).catch(function(e){if(e){console.log(e.graphQLErrors.map(function(e){return e.message}));var t=e.graphQLErrors,n={};t.map(function(e){return console.log(e),e.message.includes("'telephone'")&&(n={telephone:!0}),!0}),console.log(n),n&&a.setState({errors:ce({},a.state.errors,{},n),loading:!1})}}))}else a.setState({errors:ce({},a.state.errors,{required:!0}),loading:!1})},a.state={coach:[],verified:!1,title:"",firstName:"",lastName:"",email:"",birthdate:"",phone:"",address:"",city:"",zip:"",country:"",Coaches:[],Countries:[],usePhoneAsCountry:!0,phoneCountry:[],urlPath:void 0,error:!1,success:!1,errors:{}},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentWillMount",value:function(){this._fetchAllCoaches(),this._fetchAllCountries(),document.title="New Customer"}},{key:"render",value:function(){var e=this,t=this.props.globalState;return t.logged?t.logged&&!t.coach?r.a.createElement(S.a,{to:"/dashboard"}):(console.log(this.state),r.a.createElement(N.k,{id:"newcustomer",className:"pt-5"},r.a.createElement("h2",{className:"text-center font-weight-bold"},"Create customer"),r.a.createElement("div",{className:"text-left mt-4"},r.a.createElement(y.b,{to:"/coach",onClick:this.props.flushData},r.a.createElement(N.c,{color:"red"},r.a.createElement(N.s,{icon:"angle-left",className:"pr-2"}),"Zur\xfcck"))),this.state.success?r.a.createElement("div",{className:"w-100 h-100 flex-center"},r.a.createElement("h2",{className:"green-text text-center"},r.a.createElement(N.s,{icon:"check"}),r.a.createElement("br",null),"Customer created")):r.a.createElement(N.v,{className:"flex-center mt-4 text-center"},this.state.error&&r.a.createElement(N.h,{md:"7"},r.a.createElement(N.a,{color:"danger"},r.a.createElement("p",{className:"lead"},"Sie haben einige Pflichtfelder nicht ausgef\xfcllt."),r.a.createElement("p",null,"Bitte f\xfcllen Sie mindestens alle Felder, welche mit ",r.a.createElement("strong",null,"*")," gekennzeichnet sind aus."))),r.a.createElement(N.h,{md:"12",className:"mt-4"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Name")),r.a.createElement(N.h,{md:"12",className:"mt-4 flex-center"},r.a.createElement(N.h,{md:"3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cus"},"Kunden ID"),r.a.createElement("input",{type:"text",name:"customerid",value:this.state.customerid,onChange:this.handleTextChange,className:"form-control",id:"cus"})))),r.a.createElement(N.h,{md:"1"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"tit"},"Titel"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleTextChange,className:"form-control",id:"tit"}))),r.a.createElement(N.h,{md:"3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstN"},"Vorname",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",name:"firstName",value:this.state.firstName,onChange:this.handleTextChange,className:"form-control",id:"firstN"}))),r.a.createElement(N.h,{md:"3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastN"},"Nachname",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",name:"lastName",value:this.state.lastName,onChange:this.handleTextChange,className:"form-control",id:"lastN"}))),r.a.createElement(N.h,{md:"12",className:"mt-4"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Coach")),r.a.createElement(N.h,{md:"4"},r.a.createElement(N.w,{options:this.state.Coaches,className:"select-coach",label:r.a.createElement(r.a.Fragment,null,"Coach",r.a.createElement("span",null,"*")),getValue:this.handleSelectChange,search:!0,required:!0})),r.a.createElement(N.h,{md:"12",className:"mt-4"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Kontaktdaten")),r.a.createElement(N.h,{md:"4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"ema"},"E-Mail"),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleTextChange,className:"form-control",id:"ema"}))),r.a.createElement(N.h,{md:"4"},r.a.createElement("label",{htmlFor:"pho"},"Telefon Nummer",r.a.createElement("span",null,"*")),r.a.createElement(ee.a,{defaultCountry:"at",preferredCountries:["at","de","ch"],value:this.state.phone,onChange:this.handlePhoneChange,enableSearchField:!0,containerClass:"mb-3 react-tel-input",required:!0}),r.a.createElement(N.t,{label:"Land aus Telefon Nummer",filled:!0,onChange:function(t){return e.handlePhoneByCountry(t)},checked:this.state.usePhoneAsCountry,type:"checkbox",id:"checkbox-country-in-phone"})),r.a.createElement(N.h,{md:"12",className:"mt-4"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Wohnort")),!this.state.usePhoneAsCountry&&r.a.createElement(N.h,{md:"3"},r.a.createElement(N.w,{options:this.state.Countries,className:"select-countries",label:"Land",getValue:this.handleCountrySelectChange,search:!0,required:!0})),r.a.createElement(N.h,{md:"2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"ema"},"Postleitzahl (PLZ)"),r.a.createElement("input",{type:"text",name:"zip",value:this.state.zip,onChange:this.handleTextChange,className:"form-control",id:"plz"}))),r.a.createElement(N.h,{md:"3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"ema"},"Stadt"),r.a.createElement("input",{type:"text",name:"city",value:this.state.city,onChange:this.handleTextChange,className:"form-control",id:"cit"}))),r.a.createElement(N.h,{md:"4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"ema"},"Adresse"),r.a.createElement("input",{type:"text",name:"address",value:this.state.address,onChange:this.handleTextChange,className:"form-control",id:"adr"}))),r.a.createElement(N.h,{md:"12",className:"mt-4"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Weitere daten")),r.a.createElement(N.h,{md:"4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pho"},"Geburtsdatum"),r.a.createElement(N.m,{value:this.state.birthdate,className:"date-picker",getValue:this.getPickerValue,disableFuture:!0,format:"DD.MM.YYYY",initialFocusedDate:"01.01.1980",valueDefault:null,keyboard:!0})))),r.a.createElement("div",{className:"text-center"},this.state.errors&&this.state.errors.required&&r.a.createElement("div",null,r.a.createElement("small",{className:"text-danger"},r.a.createElement(N.s,{icon:"exclamation-triangle",className:"text-danger pr-2"}),"Pflichtfelder sind noch nicht ausgef\xfcllt.",r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},"Hinweis: Pflichtfelder sind mit einem",r.a.createElement("span",{className:"text-danger"}," * "),"versehen."))),this.state.errors&&this.state.errors.telephone&&r.a.createElement("div",null,r.a.createElement("small",{className:"text-danger"},r.a.createElement(N.s,{icon:"exclamation-triangle",className:"text-danger pr-2"}),"Es existiert bereits ein Nutzer mit dieser Telefonnummer.",r.a.createElement("br",null),r.a.createElement("span",{className:"text-muted"},"Hinweis: Der Kunde existiert vermutlich bereits.",r.a.createElement("br",null),"Bitte wenden Sie sich an den Supervisor."))),!this.state.success&&r.a.createElement(r.a.Fragment,null,this.state.loading?r.a.createElement(N.B,null):r.a.createElement(N.c,{color:"green",onClick:function(){return e._createUser()}},r.a.createElement(N.s,{icon:"check",className:"pr-2"}),"Erstellen"))))):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),he=re(Object(D.a)(me,{name:"update"}))(Object(D.b)(de));function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function fe(){var e=Object(v.a)(["\n    mutation sendbr (\n        $token: String!\n        $urlPath: String!\n        $values: GenericScalar!\n    ){\n        beautyreportBrFormPage(\n            token: $token\n            url: $urlPath\n            values: $values\n        ) {\n            result\n            errors {\n                errors\n                name\n            }\n        }\n    }\n"]);return fe=function(){return e},e}function be(){var e=Object(v.a)(["\n    query getlink($token: String!, $id: Int!) {\n        brLatestByUid(token: $token, uid: $id) {\n            __typename\n            id\n            document{\n                __typename\n                id\n                link\n            }\n        }\n    }\n"]);return be=function(){return e},e}function Ee(){var e=Object(v.a)(["\n    query getAnamneseData_byUid($token: String!, $id: Int!) {\n        anLatestByUid(token: $token, uid: $id) {\n            id\n            date\n            formData\n            user {\n                id\n                username\n            }\n        }\n    }\n"]);return Ee=function(){return e},e}function ve(){var e=Object(v.a)(["\n    query getTemplate($token: String!) {\n        pages(token: $token) {\n            ... on ReportsReportsPage {\n                id\n                chapters{\n                    __typename\n                    ... on Reports_S_ChapterBlock{\n                        chapterHeader\n                        subChapters\n                    }\n                }\n            }\n        }\n        pages(token: $token) {\n            ... on BeautyreportBrFormPage {\n                urlPath\n                formFields {\n                    name\n                    fieldType        \n                }\n            }\n        }\n    }\n"]);return ve=function(){return e},e}var ye=B()(ve()),Ne=B()(Ee()),ke=B()(be()),Oe=B()(fe()),Se=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){document.title="Generate Report",a.props.location&&a.props.location.state&&a.props.location.state.user.id&&a.setState({user:a.props.location.state.user,loading:!0},function(){return a.fetchData()})},a.fetchTemplate=function(){a.props.client.query({query:ye,variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;if(void 0!==t.pages){var n=void 0,r=void 0;t.pages.map(function(e,a){return"ReportsReportsPage"===e.__typename&&(n=t.pages[a]),"BeautyreportBrFormPage"===e.__typename&&(r=t.pages[a].urlPath),!0}),a.setState({template:n,urlPath:r})}}).catch(function(e){console.error("Query error:",e)})},a.fetchUserData=Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.client.query({query:Ne,variables:{token:localStorage.getItem("wca"),id:a.state.user.id}}).then(function(e){var t=e.data;void 0!==t.anLatestByUid&&a.setState({userdata:t.anLatestByUid})}).catch(function(e){console.error("Query error:",e)});case 2:case"end":return e.stop()}},e)})),a.fetchData=function(){a.state.user.anamneseSet.length>=1&&(a.fetchTemplate(),a.fetchUserData())},a._normalizeStatement=function(e,t){var n=a.state.userdata.formData;if(""!==e.trim()){var r=JSON.parse(n);return e.includes(", ")?!e.split(", ").map(function(e,t){return a._normalizeCondition(e,r)}).includes(!1):a._normalizeCondition(e,r)}return!0},a._getReturnValue=function(e,t){"string"==typeof e&&(e=e.replace(/\s/g,"_")),"object"==typeof e&&(e=e[0].replace(/\s/g,"_"));var n=t.replace(/^\S+/g,e).replace(/"/g,"").split(" ");return null!==a.__convertType(n[0])&&void 0!==a.__convertType(n[0])&&a.__compare(a.__convertType(n[0]),n[1],n[2])},a._normalizeCondition=function(e,t){var n=e.match(/"(.*?)"/g);if(null!==n){var r=n[0].replace(/\s/g,"_");e=e.replace(/"(.*?)"/g,r)}var l=e.replace(/ .*/,"").toLowerCase();l=(l=(l=(l=l.replace(/\xe4/g,"a")).replace(/\xf6/g,"o")).replace(/\xfc/g,"u")).replace(/\xdf/g,"ss");var c=a.__convertType(t[l]);return void 0!==c&&(Array.isArray(c)?!!c.map(function(t,n){return a._getReturnValue(t,e)}).includes(!0):a._getReturnValue(c,e))},a.__convertType=function(e){try{return new Function("return "+e+";")()}catch(t){return e}},a.__compare=function(e,t,a){switch(t){case">":return e>parseInt(a);case"<":return e<parseInt(a);case">=":return e>=parseInt(a);case"<=":return e<=parseInt(a);case"==":return e==a;case"!=":return e!=a;case"===":return e===a;case"!==":return e!==a;default:return null}},a.getLink=function(){console.log("User ID",a.props.location.state.user.id),a.props.client.query({query:ke,variables:{token:localStorage.getItem("wca"),id:a.props.location.state.user.id}}).then(function(e){var t=e.data;console.log("User Data"),console.log(t),t&&t.brLatestByUid&&a.setState({doclink:"https://manage.pharmaziegasse.at/"+t.brLatestByUid.document.link})}).catch(function(e){console.error("Query error:",e)})},a.sendData=function(e){var t={uid:a.state.user.id,data:JSON.stringify(e)};a.props.send({variables:{token:localStorage.getItem("wca"),urlPath:a.state.urlPath,values:t}}).then(function(e){var t=e.data;"OK"===t.beautyreportBrFormPage.result?a.setState({loading:!1,error:void 0},function(){return a.getLink()}):"FAIL"===t.beautyreportBrFormPage.result&&a.setState({loading:!1,error:t.beautyreportBrFormPage.errors})}).catch(function(e){console.log(e),a.setState({loading:!1,error:e})})},a._fetchVariables=function(e){if(e.includes("{{")&&e.includes("}}")){var t=a.state.userdata.formData,n=JSON.parse(t);return e.match(/{{(.*?)}}/g).map(function(t,a){var r=t.replace(/{{|}}/g,"").toLowerCase();r=(r=(r=(r=r.replace(/\xe4/g,"a")).replace(/\xf6/g,"o")).replace(/\xfc/g,"u")).replace(/\xdf/g,"ss");var l=n[r],c=l;if(Array.isArray(l)){var o="";l.map(function(e,t){l.length>1?(o+=l[t],l.length-1!==t&&(o+=", ")):o+=l[t]}),c=o}e=e.replace(t,c)}),e}return e},a.createReport=function(){var e=a.state.template,t=void 0;e.chapters.map(function(n,r){var l=a._fetchVariables(n.chapterHeader);t=t?ge({},t,Object(w.a)({},"chapter"+r,ge({},t["chapter"+r],{chapterHeader:l}))):Object(w.a)({},"chapter"+r,{chapterHeader:l}),n.subChapters.map(function(l,c){var o=a._fetchVariables(l.value.sub_chapter_header);t=ge({},t,Object(w.a)({},"chapter"+r,ge({},t["chapter"+r],Object(w.a)({},"subchapter"+c,ge({},t["chapter"+r]["subchapter"+c],{subChapterHeader:o}))))),l.value.paragraphs.map(function(o,s){var i=o.value.statement,m=a._fetchVariables(o.value.paragraph);""!==i?a._normalizeStatement(i)&&(t=ge({},t,Object(w.a)({},"chapter"+r,ge({},t["chapter"+r],Object(w.a)({},"subchapter"+c,ge({},t["chapter"+r]["subchapter"+c],Object(w.a)({},"paragraph"+s,ge({},t["chapter"+r]["subchapter"+c]["paragraph"+s],{text:m})))))))):t=ge({},t,Object(w.a)({},"chapter"+r,ge({},t["chapter"+r],Object(w.a)({},"subchapter"+c,ge({},t["chapter"+r]["subchapter"+c],Object(w.a)({},"paragraph"+s,ge({},t["chapter"+r]["subchapter"+c]["paragraph"+s],{text:m})))))));r+1===e.chapters.length&&c+1===n.subChapters.length&&s+1===l.value.paragraphs.length&&a.sendData(t)})})})},a.state={template:void 0,userdata:void 0,result:{},loading:!1,operations:0,userId:void 0,error:void 0,doclink:null},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.globalState,a=e.location;return t.logged?t.logged&&!t.coach?r.a.createElement(S.a,{to:"/dashboard"}):a.state?(void 0!==this.state.template&&void 0!==this.state.userdata&&this.state.loading&&this.createReport(),r.a.createElement(N.k,{className:"text-center pt-5"},r.a.createElement("h2",{className:"text-center font-weight-bold"},"Beautyreport erstellen"),r.a.createElement("div",{className:"mt-4"},r.a.createElement(N.v,null,r.a.createElement(N.h,{md:"12",className:"text-left"},r.a.createElement(y.b,{onClick:this.props.flushData,to:{pathname:"/report",state:{user:a.state.user}}},r.a.createElement(N.c,{color:"red"},r.a.createElement(N.s,{icon:"angle-left",className:"pr-2"}),"Zur\xfcck"))))),r.a.createElement(N.v,{className:"flex-center mt-4"},r.a.createElement(N.h,{md:"6"},this.state.error?r.a.createElement(N.d,null,r.a.createElement(N.e,null,this.state.error.length>=1?r.a.createElement(r.a.Fragment,null,this.state.error.map(function(e,t){return r.a.createElement(N.a,{key:t,color:"danger"},e.errors[0])})):r.a.createElement(N.a,{color:"danger"},r.a.createElement("p",null,"Ein unerwarteter Fehler ist aufgetreten. Bitte kontaktieren Sie den Support der Werbeagentur Christian Aichner."),r.a.createElement("p",{className:"pt-3"},r.a.createElement("a",{href:"mailto:support@aichner-christian.com"},"support@aichner-christian.com"),r.a.createElement("br",null),"oder",r.a.createElement("br",null),"+43 681 20502754")))):r.a.createElement(N.d,null,this.state.user&&this.state.user.anamneseSet.length>=1?r.a.createElement(N.e,null,this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.u,{material:!0,preloader:!0}),r.a.createElement("p",{className:"lead"},"Beautyreport wird erstellt...")):r.a.createElement(r.a.Fragment,null,!1,r.a.createElement(N.a,{color:"success",className:"mb-4"},r.a.createElement("p",null,r.a.createElement(N.s,{icon:"check",className:"pr-2"}),"Beautyreport erstellt und gespeichert!")),r.a.createElement("p",{className:"lead"},"Download als"),this.state.doclink?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:this.state.doclink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(N.c,{color:"primary"},r.a.createElement(N.s,{icon:"file-word",className:"pr-2"}),"Word"))):r.a.createElement(N.B,null))):r.a.createElement(N.e,null,r.a.createElement(N.a,{color:"info",className:"mb-0"},r.a.createElement("p",{className:"lead"},"Es wurden keine Anamnesedaten gefunden!"),r.a.createElement("p",{className:"mb-3"},"M\xf6glicherwei\xdfe wurden die Daten des Anamnese-Gespr\xe4chs noch nicht in Charm \xfcbertragen."),r.a.createElement(y.b,{to:{pathname:"/anamnesis",state:{user:this.state.user}}},r.a.createElement(N.c,{color:"info",size:"md",rounded:!0},"Anamnesedaten eintragen"))))))))):r.a.createElement(S.a,{to:"/coach"}):r.a.createElement(S.a,{to:"/login"})}}]),t}(r.a.Component),je=re(Object(D.a)(Oe,{name:"send"}))(Object(D.b)(Se));a(475);function xe(){var e=Object(v.a)(["\n    query(\n        $token: String!\n        $phone: String!\n    ) {\n        usernameByPhone(\n        token: $token,\n        phone: $phone\n        )\n    }\n"]);return xe=function(){return e},e}function we(){var e=Object(v.a)(["\n    query(\n        $token: String!\n        $email: String!\n    ) {\n        usernameByEmail(\n            token: $token,\n            email: $email\n        )\n    }\n"]);return we=function(){return e},e}function Ce(){var e=Object(v.a)(["\n    mutation tokenAuth($username: String!, $password: String!){\n        tokenAuth(username: $username, password: $password) {\n            token\n        }\n    }\n"]);return Ce=function(){return e},e}var _e=Object(ne.a)(Ce()),Pe=Object(ne.a)(we()),Te=Object(ne.a)(xe()),De=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).componentWillMount=function(){document.title="Login";var e=localStorage.getItem("method");e&&a.setState({method:e})},a.handleChange=function(e){a.setState(Object(w.a)({},e.target.type,e.target.value))},a.handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault(),e.target.className="needs-validation was-validated",a._loginAnonymous("+436643409980","admin")},a._loginAnonymous=function(){var e=Object(h.a)(d.a.mark(function e(t,n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.mutate({variables:{username:"simon",password:"admin"}}).then(function(e){e.loading;var t=e.data;console.log(t),void 0!==t&&void 0!==t.tokenAuth&&void 0!==t.tokenAuth.token&&("phone"===a.state.method?a._getUsernameByMethod(t.tokenAuth.token,"phone"):a._getUsernameByMethod(t.tokenAuth.token,"email"))}).catch(function(e,t){a.props.handler(!1)});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a._getUsernameByMethod=function(){var e=Object(h.a)(d.a.mark(function e(t,n){var r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},l=void 0,"phone"===n?(r={token:t,phone:a.state.phone},l=Te):(r={token:t,email:a.state.email},l=Pe),e.next=5,a.props.client.query({query:l,variables:r}).then(function(e){var t=e.data;console.log(t),"phone"===n?void 0!==t.usernameByPhone&&a._login(t.usernameByPhone):void 0!==t.usernameByEmail&&a._login(t.usernameByEmail)}).catch(function(e){a.setState({error:!0,loading:!1},function(){return a.props.handler(!1)})});case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a._login=function(){var e=Object(h.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.mutate({variables:{username:t,password:a.state.password}}).then(function(e){e.loading;var t=e.data;void 0!==t&&void 0!==t.tokenAuth&&void 0!==t.tokenAuth.token&&(localStorage.setItem("wca",t.tokenAuth.token),a.setState({error:!1},function(){return a.props.handler(!0)}))}).catch(function(e,t){a.setState({error:!0,loading:!1},function(){return a.props.handler(!1)})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handlePhoneChange=function(e){"phone"===a.state.method&&(e=e.replace(/\s/g,""),""===a.state.email?a.setState({phone:e.trim()}):a.setState({phone:e.trim(),email:""}))},a.handleEmailChange=function(e){"email"===a.state.method&&(""===a.state.phone?a.setState({email:e.target.value}):a.setState({email:e.target.value,phone:""}))},a.switchMethod=function(e){a.setState({method:e},function(){return localStorage.setItem("method",e)})},a.state={email:"",phone:"",password:"",method:"email",error:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return this.props.globalState.logged?r.a.createElement(S.a,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement(N.n,{color:"secondary-color lighten-3"}),r.a.createElement(N.r,{id:"login"},r.a.createElement(N.v,null,r.a.createElement(N.h,{md:"10",className:"mx-auto float-none white z-depth-1 py-2 px-2"},r.a.createElement(N.e,null,r.a.createElement(N.v,{className:"flex-center"},this.state.loading?r.a.createElement(N.h,{md:"12",className:"py-5 text-center"},r.a.createElement(N.B,{big:!0})):r.a.createElement(N.h,{md:"6"},this.state.error&&r.a.createElement(N.a,{color:"danger",className:"text-center"},"Die eingegebene Kombination existiert nicht."),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"needs-validation",noValidate:!0},r.a.createElement("p",{className:"h4 text-center mb-4"},"Einloggen"),"email"===this.state.method?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"defaultFormLoginEmailEx",className:"grey-text"},"Deine E-Mail Adresse"),r.a.createElement("input",{type:"email",id:"defaultFormLoginEmailEx",className:"form-control",value:this.state.email,onChange:this.handleEmailChange,required:!0}),r.a.createElement("div",{className:"invalid-feedback"},"Bitte gib deine E-Mail Adresse an."),r.a.createElement("div",{className:"text-right"},r.a.createElement("span",{className:"blue-text",onClick:function(){return e.switchMethod("phone")}},"\xdcber Telefonnummer einloggen"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"pho"},"Telefon Nummer"),r.a.createElement(ee.a,{defaultCountry:"at",preferredCountries:["at","de","ch"],value:this.state.phone,onChange:this.handlePhoneChange,inputExtraProps:{className:"w-100"}}),r.a.createElement("div",{className:"text-right"},r.a.createElement("span",{className:"blue-text",onClick:function(){return e.switchMethod("email")}},"\xdcber E-Mail einloggen"))),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"defaultFormLoginPasswordEx",className:"grey-text"},"Dein Passwort"),r.a.createElement("input",{type:"password",id:"defaultFormLoginPasswordEx",className:"form-control",onChange:this.handleChange,required:!0}),r.a.createElement("div",{className:"invalid-feedback"},"Bitte gib ein Passwort an."),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(N.c,{color:"success",type:"submit"},r.a.createElement(N.s,{icon:"angle-right",className:"pr-2"}),"Einloggen")),r.a.createElement("p",{className:"text-muted text-center mt-3"},"Noch kein Mitglied? Jetzt einfach ",r.a.createElement(y.b,{to:"/join"},r.a.createElement("strong",null,"Mitglied werden")),"!")))))))))}}]),t}(r.a.Component),Fe=Object(D.a)(_e)(Object(D.b)(De)),Be=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleLogin=function(e){a.props.handler(e)},a.flushData=function(){a.props.flushData()},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return console.log("Called"),r.a.createElement(S.d,null,r.a.createElement(S.b,{exact:!0,path:"/dashboard",component:function(t){return r.a.createElement(x,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/login",component:function(t){return r.a.createElement(Fe,Object.assign({handler:e.handleLogin,globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/anamnesis",component:function(t){return r.a.createElement(Z,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/coach",component:function(t){return r.a.createElement(J,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/add",component:function(t){return r.a.createElement(he,Object.assign({globalState:e.props.globalState},t,{flushData:e.flushData}))}}),r.a.createElement(S.b,{exact:!0,path:"/report",component:function(t){return r.a.createElement(U,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/report/add",component:function(t){return r.a.createElement(je,Object.assign({globalState:e.props.globalState},t,{flushData:e.flushData}))}}),r.a.createElement(S.b,{exact:!0,path:"/report/edit",component:function(t){return r.a.createElement(T,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{exact:!0,path:"/admin",component:function(){return window.location="https://manage.pharmaziegasse.at"}}),r.a.createElement(S.b,{exact:!0,path:"/api/graphiql",component:function(){return window.location="https://manage.pharmaziegasse.at/api/graphiql"}}),r.a.createElement(S.b,{exact:!0,path:"/test",component:function(t){return r.a.createElement(x,Object.assign({globalState:e.props.globalState},t))}}),r.a.createElement(S.b,{render:function(){return console.log("Called"),r.a.createElement(S.a,{to:"/login"})}}))}}]),t}(r.a.Component);function Ae(){var e=Object(v.a)(["\n  query ($token: String!) {\n    userSelf(token: $token) {\n      id\n      lastLogin\n      email\n      isActive\n      isStaff\n      isCoach\n      isCustomer\n      title    \n      firstName\n      lastName\n      birthdate\n      telephone\n      address\n      city\n      postalCode\n      userSet{\n        anamneseSet{\n          id\n        }\n        beautyreportSet{\n          id\n        }\n        id\n        customerId\n        firstName\n        lastName\n        email\n        telephone\n      }\n      country\n      newsletter\n      verified\n    }\n  }\n"]);return Ae=function(){return e},e}function Ie(){var e=Object(v.a)(["\n  mutation refresh($token: String!) {\n    refreshToken(token: $token) {\n      payload\n      token\n    }\n  }\n"]);return Ie=function(){return e},e}function Le(){var e=Object(v.a)(["\n  mutation verify($token: String!) {\n      verifyToken(token: $token) {\n        payload\n      }\n  }\n"]);return Le=function(){return e},e}var ze=Object(ne.a)(Le()),$e=Object(ne.a)(Ie()),Ue=Object(ne.a)(Ae()),qe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={logged:!1,username:void 0,coach:void 0,loaded:!1,userdata:{},flush:!1},a.componentDidMount=function(){if(null!==localStorage.getItem("wca"))try{a._verifyToken(),setInterval(Object(h.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a._verifyToken();case 1:case"end":return e.stop()}},e)})),18e4)}catch(e){console.log(e)}else a.setState({loaded:!0})},a._getUserData=function(){a.props.client.query({query:Ue,variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;void 0!==t.userSelf&&a.setState({userdata:t.userSelf,coach:t.userSelf.isCoach,loaded:!0})}).catch(function(e){console.log("Error",e)})},a._verifyToken=function(){a.props.verify({variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;void 0!==t&&null!==t.verifyToken?a._isLogged(t.verifyToken.payload.exp,t.verifyToken.payload.origIat,t.verifyToken.payload.username):a._notLogged()}).catch(function(e){console.error("Mutation error:",e)})},a._notLogged=function(){a.setState({logged:!1,username:void 0,loaded:!0})},a._setLogged=function(e){a.setState({logged:!0,username:e},function(){return a._getUserData()})},a._isLogged=function(e,t,n){~~(Date.now()/1e3)>e?(console.log("Token has expired. User should be logged out."),a._notLogged()):(!0!==a.state.logged&&a.state.username!==n&&a._setLogged(n),a._refeshToken())},a._refeshToken=function(){a.props.refresh({variables:{token:localStorage.getItem("wca")}}).then(function(e){var t=e.data;void 0!==t&&localStorage.setItem("wca",t.refreshToken.token)}).catch(function(e){console.error("Mutation error:",e)})},a.handler=function(e){e&&a._verifyToken()},a.flushData=function(){a.setState({flush:!a.state.flush})},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return console.log("Updated",this.state),r.a.createElement(y.a,null,r.a.createElement("div",{className:"flyout"},r.a.createElement("main",null,this.state.loaded&&r.a.createElement(Be,{handler:this.handler,globalState:this.state,flushData:this.flushData})),r.a.createElement(k,{globalState:this.state})))}}]),t}(r.a.Component),Me=re(Object(D.a)(ze,{name:"verify"}),Object(D.a)($e,{name:"refresh"}))(Object(D.b)(qe)),Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a.d(t,"APIHost",function(){return Ge});var Ge="https://manage.pharmaziegasse.at",We=new m.b({introspectionQueryResultData:{__schema:{types:[]}}}),He=new m.a({fragmentMatcher:We}),Ke=Ge+"/api/graphql",Ye=new i.a({uri:Ke,headers:{authorization:localStorage.getItem("wca")}}),Qe=new o.a({cache:He,link:Ye});c.a.render(r.a.createElement(s.b,{client:Qe},r.a.createElement(Me,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");Ve?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Re(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Re(e)})}}()}},[[209,1,2]]]);
//# sourceMappingURL=main.7ab92837.chunk.js.map